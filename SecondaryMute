/**
 * Jose Fernandez: 
 * Simulates a mute button directly on main screen (Action Button, no rows or widgets needed)
 * Counts how many times mute is clicked (displayed on console)
 * 
 */
const xapi = require('xapi');

var i = 0;
// These match the widget id of the In-Room control buttons
const numbers = {
  mutePanel: 'mutePanel',
};

function alert(title, text = '', duration = 5) {
  xapi.command('UserInterface Message Alert Display', {
    Title: title,
    Text: text,
    Duration: duration,
  });
}

function setMute(mute) {
  xapi.command(mute ? 'Audio Microphones Mute' : 'Audio Microphones Unmute');
}

//Modulo is used to switch between muted and unmuted modes. Even times pressed = mute, odd = unmute
function listenToGui() {
  xapi.event.on('UserInterface Extensions Panel Clicked', (event) => {
    if(event.PanelId === 'mutePanel'){
        if(i%2 === 0){
           setMute(true);
           i++;
           console.log(i);
        }
        else{
           setMute(false);
           i++;
           console.log(i);
        }
      }
  });
}

listenToGui();
